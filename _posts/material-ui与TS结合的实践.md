---
title: material-uiä¸TSç»“åˆçš„å®è·µ
date: 2019-01-31 19:19:56
tags: React
---
> TypeScript yes!!!

<!-- more -->
# ä»‹ç»
## material-ui
[material-ui](https://material-ui.com/)æ˜¯ä¸€æ¬¾Reactä¸‹çš„ç»„ä»¶åº“ï¼Œå®ƒæ”¯æŒç»å¤§éƒ¨åˆ†Material Designæ‰€å®šä¹‰çš„ç»„ä»¶ã€‚ç›¸æ¯”å…¶ä»–çš„Reactç»„ä»¶åº“ã€æ¯”å¦‚[antd](https://ant.design/),[semantic-ui](https://react.semantic-ui.com)ã€‘ï¼Œå®ƒæœ‰å¦‚ä¸‹ä¼˜åŠ¿ï¼š
* æ ·å¼é…·ç‚«ï¼Œ ç¬¦åˆå¹´è½»äººå®¡ç¾
* å®šåˆ¶åŒ–ç¨‹åº¦å¼º
* æ”¯æŒå¤šç§CSSå†™æ³•ï¼Œå¦‚
  1. JSS
  2. Styled-Components
  3. CSS Modules
  4. LESS
  5. SASS/SCSS
* å®Œå–„çš„Typescriptæ”¯æŒ

## Typescript
[Typescript](http://www.typescriptlang.org/)æ˜¯ç”±å¾®è½¯å¼€å‘çš„JavaScriptçš„è¶…é›†ï¼ŒåŒæ—¶å€Ÿé‰´äº†Javaä¸Cï¼ƒçš„ä¼˜ç‚¹ã€‚ç›¸æ¯”JavaScriptï¼Œå®ƒçš„ä¼˜åŠ¿åœ¨äº:
* é™æ€ç±»å‹æ£€æŸ¥ï¼Œå‡å°‘è¿è¡Œæ—¶é”™è¯¯
* å¢å¼ºIDEçš„æ™ºèƒ½æç¤º
* å¼ºå¤§çš„ç¤¾åŒºæ”¯æŒ
* ç©ºå®‰å…¨æœºåˆ¶

## Umi
[umi](https://umijs.org)ï¼Œä¸­æ–‡å¯å‘éŸ³ä¸ºä¹Œç±³ï¼Œæ˜¯ä¸€ä¸ªç”±é˜¿é‡Œå¼€æºçš„ react åº”ç”¨æ¡†æ¶ã€‚umi ä»¥è·¯ç”±ä¸ºåŸºç¡€çš„ï¼Œæ”¯æŒç±» next.js çš„çº¦å®šå¼è·¯ç”±ï¼Œä»¥åŠå„ç§è¿›é˜¶çš„è·¯ç”±åŠŸèƒ½ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ï¼Œæ¯”å¦‚æ”¯æŒè·¯ç”±çº§çš„æŒ‰éœ€åŠ è½½ã€‚ç„¶åé…ä»¥å®Œå–„çš„æ’ä»¶ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ï¼Œç›®å‰å†…å¤–éƒ¨åŠ èµ·æ¥å·²æœ‰ 50+ çš„æ’ä»¶ã€‚å®ƒçš„ä¸»è¦ç‰¹æ€§åœ¨äºï¼š
* ğŸ“¦ **å¼€ç®±å³ç”¨**ï¼Œå†…ç½® reactã€react-router ç­‰
* ğŸˆ **ç±» next.js ä¸”[åŠŸèƒ½å®Œå¤‡](https://umijs.org/guide/router.html)çš„è·¯ç”±çº¦å®š**ï¼ŒåŒæ—¶æ”¯æŒé…ç½®çš„è·¯ç”±æ–¹å¼
* ğŸ‰ **å®Œå–„çš„æ’ä»¶ä½“ç³»**ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸ
* ğŸš€ **é«˜æ€§èƒ½**ï¼Œé€šè¿‡æ’ä»¶æ”¯æŒ PWAã€ä»¥è·¯ç”±ä¸ºå•å…ƒçš„ code splitting ç­‰
* ğŸ’ˆ **æ”¯æŒé™æ€é¡µé¢å¯¼å‡º**ï¼Œé€‚é…å„ç§ç¯å¢ƒï¼Œæ¯”å¦‚ä¸­å°ä¸šåŠ¡ã€æ— çº¿ä¸šåŠ¡ã€[egg](https://github.com/eggjs/egg)ã€æ”¯ä»˜å®é’±åŒ…ã€äº‘å‡¤è¶ç­‰
* ğŸš„ **å¼€å‘å¯åŠ¨å¿«**ï¼Œæ”¯æŒä¸€é”®å¼€å¯ [dll](https://umijs.org/plugin/umi-plugin-react.html#dll) å’Œ [hard-source-webpack-plugin](https://umijs.org/plugin/umi-plugin-react.html#hardSource) ç­‰
* ğŸ  **ä¸€é”®å…¼å®¹åˆ° IE9**ï¼ŒåŸºäº [umi-plugin-polyfills](https://umijs.org/plugin/umi-plugin-react.html#polyfills)
* ğŸ **å®Œå–„çš„ TypeScript æ”¯æŒ**ï¼ŒåŒ…æ‹¬ d.ts å®šä¹‰å’Œ umi test
* ğŸŒ´ **ä¸ dva æ•°æ®æµçš„æ·±å…¥èåˆ**ï¼Œæ”¯æŒ duck directoryã€model çš„è‡ªåŠ¨åŠ è½½ã€code splitting ç­‰ç­‰

# æœ€ä½³å®è·µ
## å‰æœŸå‡†å¤‡
1. å®‰è£…umiè„šæ‰‹æ¶
   è‡ªè¡ŒæŸ¥çœ‹[é€šè¿‡è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®](https://umijs.org/zh/guide/create-umi-app.html)
2. å®‰è£…material-ui
   è‡ªè¡ŒæŸ¥çœ‹[å®‰è£… - Material-UI](https://material-ui.com/getting-started/installation/)
3. æš´éœ²HTMLæ¨¡æ¿
   UMIçš„HTMLæ¨¡æ¿é»˜è®¤æ˜¯éšè—çš„,éœ€è¦åœ¨`pages`ä¸‹æ–°å»º`ejs`æ–‡ä»¶ä»¥æš´éœ²
   ```bash
   cd src/pages
   vim ./document.ejs
   ```
    
4. åŠ å…¥å­—ä½“åº“å’Œç§»åŠ¨ç«¯æ”¯æŒ
   ```html
   <!doctype html>
    <html>
    <head>
      <meta charset="utf-8" />
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My app</title>
      <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500">
      <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
    </head>
    <body>
      <div id="root"></div>
    </body>
    </html>
    ```
5. ä¿®æ”¹tsconfigæå‡å˜æˆä¹è¶£
   Umiå·²ç»æŠŠå¤§ä½“çš„é…ç½®å¥½äº†ï¼Œå¯ä»¥å†åŠ å…¥ä¸€äº›æ£€æŸ¥
   ```js
    // tsconfig.json
    "noImplicitAny": true, //ç¦æ­¢éšå¼çš„any
    "noImplicitReturns": true, //ç¦æ­¢éšå¼çš„return
    "noImplicitThis": true, //ç¦æ­¢éšå¼çš„this
    "strictNullChecks": true //ç©ºå®‰å…¨æ£€æŸ¥
   ```
## å…·ä½“ç¼–ç 
### æ”¹å†™stylesçš„å£°æ˜æ–¹å¼
1. æ— theme
   ```ts
   const styles = createStyles({
       // JSS code
   })
   ```
2. æœ‰theme
   ```ts
   const styles = (theme: Theme) => createStyls({
       // JSS code
   })
   ```
### æ”¹å†™Propsçš„å£°æ˜æ–¹å¼
Propséœ€è¦ç»§æ‰¿WithStylesè¿™ä¸€æ³›å‹æ¥å£
```ts
interface Props extends WithStyles<typeof styles>{}
/* ....... */ 
class Example extends React.Component<Props,State>{}
```
### è‡ªå®šä¹‰ä¸»é¢˜
ä¸€èˆ¬åœ¨é¡¶å±‚ç»„ä»¶(umiä¸‹æ˜¯`src/layouts/index.tsx`)ä¸‹è‡ªå®šä¹‰ä¸»é¢˜å³å¯
```tsx
// .......æ²¡æ³•é«˜äº®ï¼ŒæŠ±æ­‰
const customizedTheme = createMuiTheme({
    palette: {
      primary: blue,
      secondary: red,
    },
    typography: {
      useNextVariants: true
    },
})
function Layout(props: Props){
    return (
      <MuiThemeProvider theme={customizedTheme}>
        {props.children}    
      </MuiThemeProvider>
    )
}
export default withStyles(styles,{withTheme: true})(Layout)
```
### Attentionï¼
**ä¸è¦ä½¿ç”¨@material-ui/stylesä¸‹çš„å‡½æ•°/ç»„ä»¶ï¼Œå¤©å‘è­¦å‘Š**
**ä¸è¦ä½¿ç”¨@material-ui/stylesä¸‹çš„å‡½æ•°/ç»„ä»¶ï¼Œå¤©å‘è­¦å‘Š**
**ä¸è¦ä½¿ç”¨@material-ui/stylesä¸‹çš„å‡½æ•°/ç»„ä»¶ï¼Œå¤©å‘è­¦å‘Š**